services:
    prometheus:
        build: ./prometheus
        volumes:
            - "./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml"
        environment:
            PROM_USERNAME: ${ACTUATOR_USERNAME}
            PROM_PASSWORD: ${ACTUATOR_PASSWORD}
    grafana:
        image: grafana/grafana
        container_name: grafana
        ports:
            - "3001:3000"
        restart: unless-stopped
        environment:
            GF_DASHBOARDS_MIN_REFRESH_INTERVAL: "1s"
            GF_USERS_ALLOW_SIGN_UP: false
            GF_SECURITY_ADMIN_USER: ${GRAFANA_USERNAME}
            GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_PASSWORD}
        volumes:
            - ./grafana/provisioning:/etc/grafana/provisioning
            - grafana-data:/var/lib/grafana

volumes:
    grafana-data:
